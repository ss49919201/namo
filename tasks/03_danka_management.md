# 檀家情報管理機能

## 目的

檀家の基本情報、家族構成、故人情報を効率的に管理するシステムを実現する。

## タスク内容

### 3.1 檀家基本情報管理

- [ ] 檀家一覧画面
  - 檀家リスト表示
  - ページネーション
  - ソート機能
  - フィルター機能
- [ ] 檀家詳細画面
  - 基本情報表示
  - タブ形式の情報表示
  - 編集モード切替
- [ ] 檀家登録/編集フォーム
  - 入力フォーム実装
  - バリデーション
  - 住所自動補完
  - ファイルアップロード
- [ ] データ修正履歴
  - 変更履歴の記録
  - 履歴表示機能
  - 差分表示

### 3.2 家族構成管理

- [ ] 家族構成一覧表示
  - 家族リスト表示
  - 続柄表示
  - 年齢計算
- [ ] 家族構成員登録/編集
  - 登録フォーム
  - 編集機能
  - 削除機能
- [ ] 家族構成情報のバリデーション
  - 入力値チェック
  - 重複チェック
  - 関連性チェック

### 3.3 故人情報管理

- [ ] 故人情報一覧表示
  - 故人リスト表示
  - 命日表示
  - 法名表示
- [ ] 故人情報登録/編集
  - 登録フォーム
  - 編集機能
  - 削除機能
- [ ] 命日管理機能
  - 命日カレンダー表示
  - 命日通知設定
  - 年忌計算

## 関連ファイル

- `app/danka/page.tsx`
- `app/danka/[id]/page.tsx`
- `app/danka/new/page.tsx`
- `components/danka/DankaList.tsx`
- `components/danka/DankaForm.tsx`
- `components/danka/FamilyList.tsx`
- `components/danka/DeceasedList.tsx`
- `lib/danka.ts`
- `types/danka.ts`

## 完了条件

- [ ] 檀家情報の CRUD 操作が正常に機能すること
- [ ] 家族構成情報が適切に管理できること
- [ ] 故人情報が正確に記録・表示されること
- [ ] データの整合性が保たれること
- [ ] ユーザーインターフェースが使いやすいこと
- [ ] パフォーマンスが良好であること

## 注意事項

- 個人情報の適切な取り扱い
- データのバックアップ
- 入力値の厳密なバリデーション
- ユーザーフレンドリーな UI/UX
- エラーハンドリングの徹底
- アクセス権限の適切な管理
